#!/bin/sh

echo "ğŸ“„ Generating OpenAPI spec..."
npm run openapi:generate

if [ $? -ne 0 ]; then
  echo "âŒ OpenAPI generation failed! Commit aborted."
  exit 1
fi

git add public/openapi.yaml

echo "ğŸ§ª Running tests before commit..."
npm test -- --run

if [ $? -ne 0 ]; then
  echo "âŒ Tests failed! Commit aborted."
  exit 1
fi

echo "âœ… Tests passed!"
